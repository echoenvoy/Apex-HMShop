<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HMShop | Premium Products</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="logo.png">
    <style>
        :root {
            --primary: 196 78% 38%;
            --primary-foreground: 0 0% 100%;
            --secondary: 210 40% 98%;
            --secondary-foreground: 222.2 84% 4.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --radius: 0.75rem;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --success: 142 76% 36%;
            --warning: 38 92% 50%;
            --destructive: 0 84% 60%;
            --success-bg: 142 76% 97%;
            --highlight: 24 95% 54%;
            --font-sans: 'Space Grotesk', sans-serif;
            --font-display: 'Fraunces', serif;
            
        }

        .dark {
            --primary: 190 84% 55%;
            --primary-foreground: 222.2 84% 4.9%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --success: 142 76% 46%;
            --warning: 38 92% 60%;
            --destructive: 0 84% 70%;
            --success-bg: 142 76% 10%;
            --highlight: 24 95% 60%;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-sans);
        }

        body {
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            transition: background-color 0.3s, color 0.3s;
            line-height: 1.6;
            background-image: radial-gradient(circle at 15% 10%, hsla(var(--primary), 0.12), transparent 45%),
                              radial-gradient(circle at 85% 0%, hsla(var(--highlight), 0.14), transparent 40%);
        }

        h1, h2, h3, .section-title, .logo span {
            font-family: var(--font-display);
            letter-spacing: 0.2px;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Header Styles */
        header {
            background-color: hsl(var(--background));
            border-bottom: 1px solid hsl(var(--border));
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 700;
            font-size: 1.75rem;
            color: hsl(var(--primary));
            text-decoration: none;
        }

        .logo i {
            font-size: 2rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2.5rem;
        }

        nav a {
            text-decoration: none;
            color: hsl(var(--foreground));
            font-weight: 500;
            padding: 0.5rem 0;
            position: relative;
            transition: color 0.2s;
        }

        nav a:hover {
            color: hsl(var(--primary));
        }

        nav a.active {
            color: hsl(var(--primary));
        }

        nav a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: hsl(var(--primary));
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1.25rem;
        }

        .search-container {
            position: relative;
            width: 320px;
        }

        .search-container input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        .search-container input:focus {
            outline: none;
            border-color: hsl(var(--primary));
            box-shadow: 0 0 0 3px hsla(var(--primary), 0.1);
        }

        .search-container i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: hsl(var(--muted-foreground));
        }

        .action-btn {
            background: none;
            border: none;
            color: hsl(var(--foreground));
            font-size: 1.25rem;
            cursor: pointer;
            position: relative;
            padding: 0.6rem;
            border-radius: var(--radius);
            transition: background-color 0.2s;
        }

        .action-btn:hover {
            background-color: hsl(var(--accent));
        }

        .badge {
            position: absolute;
            top: 0;
            right: 0;
            background-color: hsl(var(--destructive));
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: hsl(var(--foreground));
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--highlight)) 100%);
            color: white;
            padding: 6rem 0;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 650px;
        }

        .hero-badge {
            display: inline-block;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 0.6rem 1.25rem;
            border-radius: 2rem;
            font-size: 0.95rem;
            margin-bottom: 1.25rem;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .hero h1 {
            font-size: 3.75rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.75rem;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            opacity: 0.9;
            line-height: 1.7;
        }

        .hero-buttons {
            display: flex;
            gap: 1.25rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.9rem 2rem;
            border-radius: var(--radius);
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            font-size: 1.05rem;
        }

        .btn-primary {
            background-color: white;
            color: hsl(var(--primary));
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-outline {
            background-color: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Products Section */
        .section-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 2.5rem;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -0.75rem;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, hsl(var(--primary)), hsl(var(--highlight)));
            border-radius: 2px;
        }

        .products-section {
            padding: 5rem 0;
        }

        .filters {
            display: flex;
            gap: 2rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
            background-color: hsl(var(--card));
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .filter-group label {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .filter-group select, .filter-group input {
            padding: 0.75rem;
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            transition: all 0.2s;
        }

        .filter-group select:focus, .filter-group input:focus {
            outline: none;
            border-color: hsl(var(--primary));
            box-shadow: 0 0 0 3px hsla(var(--primary), 0.1);
        }

        .price-range {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .price-range input {
            width: 100px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2.5rem;
        }

        .product-card {
            background-color: hsl(var(--card));
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.4s, box-shadow 0.4s;
            position: relative;
            border: 1px solid hsl(var(--border));
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
        }

        .product-image {
            width: 100%;
            height: 240px;
            object-fit: cover;
            transition: transform 0.4s;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-badges {
            position: absolute;
            top: 1rem;
            left: 1rem;
            display: flex;
            gap: 0.75rem;
        }

        .badge-category, .badge-discount {
            padding: 0.4rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .badge-category {
            background-color: hsl(var(--accent));
            color: hsl(var(--accent-foreground));
        }

        .badge-discount {
            background-color: hsl(var(--destructive));
            color: white;
        }

        .product-info {
            padding: 1.75rem;
        }

        .product-name {
            font-weight: 700;
            font-size: 1.25rem;
            margin-bottom: 0.75rem;
            line-height: 1.3;
        }

        .product-description {
            color: hsl(var(--muted-foreground));
            font-size: 0.95rem;
            margin-bottom: 1.25rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.6;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
        }

        .current-price {
            font-weight: 800;
            font-size: 1.4rem;
            color: hsl(var(--primary));
        }

        .original-price {
            color: hsl(var(--muted-foreground));
            text-decoration: line-through;
            font-size: 1rem;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .stars {
            color: hsl(var(--warning));
        }

        .rating-count {
            color: hsl(var(--muted-foreground));
            font-size: 0.9rem;
        }

        .product-actions {
            display: flex;
            gap: 0.75rem;
        }

        .btn-add-to-cart, .btn-wishlist {
            flex: 1;
            padding: 0.75rem;
            border-radius: var(--radius);
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.95rem;
        }

        .btn-add-to-cart {
            background-color: hsl(var(--primary));
            color: white;
        }

        .btn-add-to-cart:hover {
            background-color: hsl(var(--primary), 0.9);
            transform: translateY(-2px);
        }

        .btn-add-to-cart.added {
            background-color: hsl(var(--success));
            color: white;
        }

        .btn-wishlist {
            background-color: hsl(var(--accent));
            color: hsl(var(--accent-foreground));
        }

        .btn-wishlist:hover {
            background-color: hsl(var(--accent), 0.8);
            transform: translateY(-2px);
        }

        .btn-wishlist.active {
            color: hsl(var(--destructive));
        }

        .out-of-stock {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.3rem;
            backdrop-filter: blur(2px);
        }

        /* Cart Drawer */
        .cart-drawer {
            position: fixed;
            top: 0;
            right: -450px;
            width: 100%;
            max-width: 450px;
            height: 100%;
            background-color: hsl(var(--background));
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            transition: right 0.4s ease;
            display: flex;
            flex-direction: column;
        }

        .cart-drawer.open {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.75rem;
            border-bottom: 1px solid hsl(var(--border));
            background-color: hsl(var(--card));
        }

        .cart-title {
            font-weight: 700;
            font-size: 1.4rem;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: hsl(var(--foreground));
            padding: 0.5rem;
            border-radius: var(--radius);
            transition: background-color 0.2s;
        }

        .close-cart:hover {
            background-color: hsl(var(--accent));
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .cart-item {
            display: flex;
            gap: 1.25rem;
            padding: 1.25rem 0;
            border-bottom: 1px solid hsl(var(--border));
        }

        .cart-item-image {
            width: 90px;
            height: 90px;
            object-fit: cover;
            border-radius: var(--radius);
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 1.05rem;
        }

        .cart-item-price {
            color: hsl(var(--primary));
            font-weight: 700;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .quantity-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 1px solid hsl(var(--border));
            background: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quantity-btn:hover {
            background-color: hsl(var(--accent));
        }

        .quantity {
            min-width: 35px;
            text-align: center;
            font-weight: 600;
        }

        .remove-item {
            background: none;
            border: none;
            color: hsl(var(--destructive));
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            margin-left: auto;
            padding: 0.5rem;
            border-radius: var(--radius);
            transition: background-color 0.2s;
        }

        .remove-item:hover {
            background-color: hsla(var(--destructive), 0.1);
        }

        .cart-footer {
            padding: 1.75rem;
            border-top: 1px solid hsl(var(--border));
            background-color: hsl(var(--card));
        }

        .cart-totals {
            margin-bottom: 1.75rem;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            font-size: 1.05rem;
        }

        .total-row:last-child {
            font-weight: 800;
            font-size: 1.3rem;
            border-top: 1px solid hsl(var(--border));
            padding-top: 0.75rem;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background-color: hsl(var(--primary));
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .checkout-btn:hover {
            background-color: hsl(var(--primary), 0.9);
        }

        .continue-shopping {
            display: block;
            text-align: center;
            color: hsl(var(--primary));
            text-decoration: none;
            font-weight: 600;
            font-size: 1rem;
        }

        .empty-cart {
            text-align: center;
            padding: 3rem 2rem;
            color: hsl(var(--muted-foreground));
        }

        .empty-cart i {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            opacity: 0.5;
        }

        .empty-cart h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
            backdrop-filter: blur(2px);
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 2.5rem;
            right: 2.5rem;
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            padding: 1.25rem 1.75rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-xl);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.4s, opacity 0.4s;
            z-index: 1001;
            max-width: 350px;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            border-left: 5px solid hsl(var(--success));
        }

        .toast.error {
            border-left: 5px solid hsl(var(--destructive));
        }

        /* Scroll to top */
        .scroll-to-top {
            position: fixed;
            bottom: 2.5rem;
            right: 2.5rem;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background-color: hsl(var(--primary));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-xl);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
            z-index: 99;
        }

        .scroll-to-top:hover {
            transform: translateY(-5px);
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        /* Footer */
        footer {
            background-color: hsl(var(--muted));
            padding: 4rem 0 2rem;
            margin-top: 5rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 2.5rem;
            margin-bottom: 3rem;
        }

        .footer-column h3 {
            font-weight: 700;
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column li {
            margin-bottom: 0.75rem;
        }

        .footer-column a {
            color: hsl(var(--muted-foreground));
            text-decoration: none;
            transition: color 0.2s;
            font-size: 1rem;
        }

        .footer-column a:hover {
            color: hsl(var(--primary));
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid hsl(var(--border));
            color: hsl(var(--muted-foreground));
            font-size: 0.95rem;
        }

        /* Theme Toggle */
        .theme-toggle {
            background: none;
            border: none;
            color: hsl(var(--foreground));
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.6rem;
            border-radius: var(--radius);
            transition: background-color 0.2s;
        }

        .theme-toggle:hover {
            background-color: hsl(var(--accent));
        }

        /* Page Content */
        .page-content {
            display: none;
            min-height: 70vh;
            padding: 3rem 0;
        }

        .page-content.active {
            display: block;
        }

        /* Product Detail Page */
        .product-detail {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-top: 2.5rem;
        }

        .product-gallery {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .main-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .thumbnail-container {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 0.5rem;
        }

        .thumbnail {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: var(--radius);
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s, transform 0.2s;
            border: 2px solid transparent;
        }

        .thumbnail:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .thumbnail.active {
            opacity: 1;
            border: 2px solid hsl(var(--primary));
        }

        .product-info-detail {
            padding: 1.5rem 0;
        }

        .product-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .product-meta {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .product-price-detail {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .current-price-large {
            font-size: 2.2rem;
            font-weight: 800;
            color: hsl(var(--primary));
        }

        .original-price-large {
            font-size: 1.8rem;
            color: hsl(var(--muted-foreground));
            text-decoration: line-through;
        }

        .discount-badge-large {
            background-color: hsl(var(--destructive));
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 700;
        }

        .product-description-detail {
            margin-bottom: 2.5rem;
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .product-actions-detail {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2.5rem;
            align-items: center;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .quantity-input {
            width: 80px;
            text-align: center;
            padding: 0.75rem;
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .btn-add-to-cart-large {
            padding: 1rem 2.5rem;
            background-color: hsl(var(--primary));
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.1rem;
        }

        .btn-add-to-cart-large:hover {
            background-color: hsl(var(--primary), 0.9);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-add-to-cart-large.added {
            background-color: hsl(var(--success));
        }

        .product-specs {
            margin-top: 3rem;
            background-color: hsl(var(--card));
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .specs-table {
            width: 100%;
            border-collapse: collapse;
        }

        .specs-table td {
            padding: 1rem;
            border-bottom: 1px solid hsl(var(--border));
        }

        .specs-table td:first-child {
            font-weight: 700;
            width: 30%;
        }

        /* Related Products */
        .related-products {
            margin-top: 5rem;
        }

        /* Wishlist Page */
        .wishlist-container {
            margin-top: 2.5rem;
        }

        .empty-wishlist {
            text-align: center;
            padding: 5rem 2rem;
            color: hsl(var(--muted-foreground));
        }

        .empty-wishlist i {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            opacity: 0.5;
        }

        .empty-wishlist h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .empty-wishlist p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        /* Checkout Page */
        .checkout-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-top: 2.5rem;
        }

        .checkout-form {
            background-color: hsl(var(--card));
            padding: 2.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .form-group {
            margin-bottom: 1.75rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.75rem;
            font-weight: 600;
            font-size: 1.05rem;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.9rem;
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            font-size: 1rem;
            transition: all 0.2s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: hsl(var(--primary));
            box-shadow: 0 0 0 3px hsla(var(--primary), 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .order-summary {
            background-color: hsl(var(--card));
            padding: 2.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            height: fit-content;
        }

        .order-items {
            margin-bottom: 2rem;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid hsl(var(--border));
        }

        .order-item-details {
            display: flex;
            gap: 1.25rem;
        }

        .order-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: var(--radius);
        }

        .order-item-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .order-item-price {
            color: hsl(var(--primary));
            font-weight: 700;
            font-size: 1.2rem;
        }

        .order-totals {
            border-top: 1px solid hsl(var(--border));
            padding-top: 1.5rem;
        }

        .order-total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        .order-total-row:last-child {
            font-weight: 800;
            font-size: 1.4rem;
            border-top: 1px solid hsl(var(--border));
            padding-top: 0.75rem;
        }

        /* Login Page */
        .login-container {
            max-width: 450px;
            margin: 3rem auto;
            background-color: hsl(var(--card));
            padding: 3rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-xl);
        }

        .login-title {
            text-align: center;
            margin-bottom: 2.5rem;
            font-size: 2.2rem;
            font-weight: 800;
        }

        /* About Page */
        .about-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .about-hero {
            text-align: center;
            margin-bottom: 4rem;
        }

        .about-hero h1 {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            font-weight: 800;
        }

        .about-hero p {
            font-size: 1.3rem;
            color: hsl(var(--muted-foreground));
            max-width: 600px;
            margin: 0 auto;
        }

        .about-section {
            margin-bottom: 4rem;
        }

        .about-section h2 {
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2.5rem;
            margin-top: 2.5rem;
        }

        .team-member {
            text-align: center;
            background-color: hsl(var(--card));
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .team-member:hover {
            transform: translateY(-5px);
        }

        .team-member img {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1.5rem;
            border: 5px solid hsl(var(--primary));
        }

        /* Shipping Page */
        .shipping-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .shipping-section {
            margin-bottom: 3.5rem;
            background-color: hsl(var(--card));
            padding: 2.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .shipping-section h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        /* Reports Page */
        .reports-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
            margin-top: 2.5rem;
        }

        .report-card {
            background-color: hsl(var(--card));
            padding: 2.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s;
        }

        .report-card:hover {
            transform: translateY(-5px);
        }

        .report-value {
            font-size: 3rem;
            font-weight: 800;
            margin: 1.5rem 0;
            color: hsl(var(--primary));
        }

        .report-label {
            color: hsl(var(--muted-foreground));
            font-size: 1.1rem;
        }

        /* 404 Page */
        .not-found {
            text-align: center;
            padding: 5rem 2rem;
        }

        .not-found h1 {
            font-size: 8rem;
            font-weight: 800;
            color: hsl(var(--primary));
            margin-bottom: 1.5rem;
        }

        .not-found h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .not-found p {
            color: hsl(var(--muted-foreground));
            margin-bottom: 2.5rem;
            font-size: 1.2rem;
        }

        /* Sorting, filters, and variants */
        .filter-note {
            font-size: 0.85rem;
            color: hsl(var(--muted-foreground));
        }

        .variant-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            align-items: center;
            margin-top: 1rem;
        }

        .variant-label {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .size-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .size-option {
            border: 1px solid hsl(var(--border));
            padding: 0.35rem 0.7rem;
            border-radius: 999px;
            background: hsl(var(--background));
            cursor: pointer;
            font-size: 0.85rem;
        }

        .size-option.active {
            background: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            border-color: transparent;
        }

        .color-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            color: hsl(var(--muted-foreground));
        }

        .color-swatch {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 1px solid hsl(var(--border));
            display: inline-block;
        }

        .low-stock {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            background: hsla(var(--warning), 0.15);
            color: hsl(var(--warning));
            font-weight: 600;
            font-size: 0.85rem;
            padding: 0.25rem 0.6rem;
            border-radius: 999px;
        }

        .product-meta-row {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            margin-top: 0.75rem;
            font-size: 0.9rem;
            color: hsl(var(--muted-foreground));
        }

        .btn-compare {
            background: hsl(var(--secondary));
            border: 1px solid hsl(var(--border));
            color: hsl(var(--foreground));
            border-radius: 0.65rem;
            padding: 0.55rem 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-compare.active {
            background: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            border-color: transparent;
        }

        /* Reviews */
        .reviews-section {
            margin-top: 3rem;
        }

        .review-list {
            display: grid;
            gap: 1.5rem;
        }

        .review-card {
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .review-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 0.75rem;
        }

        .review-author {
            font-weight: 600;
        }

        .review-date {
            font-size: 0.85rem;
            color: hsl(var(--muted-foreground));
        }

        .review-form {
            margin-top: 2rem;
            background: hsl(var(--secondary));
            border-radius: var(--radius);
            padding: 1.5rem;
        }

        .review-form textarea {
            min-height: 120px;
            resize: vertical;
        }

        .review-form .form-row {
            grid-template-columns: 2fr 1fr;
        }

        /* Compare bar and modal */
        .compare-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: hsl(var(--card));
            border-top: 1px solid hsl(var(--border));
            box-shadow: var(--shadow-lg);
            transform: translateY(110%);
            transition: transform 0.3s ease;
            z-index: 140;
        }

        .compare-bar.active {
            transform: translateY(0);
        }

        .compare-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            padding: 1rem 0;
        }

        .compare-items {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .compare-pill {
            background: hsl(var(--secondary));
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .compare-pill button {
            background: none;
            border: none;
            cursor: pointer;
            color: hsl(var(--muted-foreground));
        }

        .compare-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .compare-btn {
            background: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            border: none;
            border-radius: var(--radius);
            padding: 0.6rem 1.25rem;
            font-weight: 600;
            cursor: pointer;
        }

        .compare-link {
            background: none;
            border: none;
            color: hsl(var(--muted-foreground));
            cursor: pointer;
            font-weight: 600;
        }

        .compare-modal,
        .modal {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 150;
        }

        .compare-modal.active,
        .modal.active {
            display: flex;
        }

        .compare-card,
        .modal-content {
            background: hsl(var(--card));
            border-radius: var(--radius);
            padding: 2rem;
            width: min(1000px, 92vw);
            max-height: 85vh;
            overflow: auto;
            box-shadow: var(--shadow-xl);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            cursor: pointer;
            color: hsl(var(--muted-foreground));
        }

        .compare-table {
            width: 100%;
            border-collapse: collapse;
        }

        .compare-table th,
        .compare-table td {
            padding: 0.9rem;
            border-bottom: 1px solid hsl(var(--border));
            text-align: left;
            vertical-align: top;
        }

        .compare-table th {
            color: hsl(var(--muted-foreground));
            font-weight: 600;
            width: 160px;
        }

        .compare-product-head {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .compare-product-head img {
            width: 72px;
            height: 72px;
            border-radius: var(--radius);
            object-fit: cover;
        }

        /* Email notifications */
        .notification-preferences {
            margin-top: 2rem;
            background: hsl(var(--card));
            padding: 1.5rem;
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
        }

        .checkbox-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-top: 0.75rem;
            font-weight: 500;
        }

        .email-notifications {
            margin-top: 1.5rem;
            background: hsl(var(--card));
            padding: 1.5rem;
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
        }

        .notification-item {
            display: flex;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid hsl(var(--border));
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-icon {
            color: hsl(var(--primary));
            font-size: 1.1rem;
            margin-top: 0.1rem;
        }

        /* Mobile Styles */
        @media (max-width: 1024px) {
            .product-detail {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
            
            .checkout-container {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }
            
            .logo {
                font-size: 1.5rem;
            }
            
            nav {
                order: 3;
                width: 100%;
                margin-top: 1.5rem;
                display: none;
            }
            
            nav.show {
                display: block;
            }
            
            nav ul {
                flex-direction: column;
                gap: 0;
            }
            
            nav li {
                border-bottom: 1px solid hsl(var(--border));
            }
            
            nav a {
                display: block;
                padding: 1rem 0;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .search-container {
                width: 100%;
                order: 2;
                margin-top: 1.5rem;
            }
            
            .header-actions {
                gap: 0.75rem;
            }
            
            .hero h1 {
                font-size: 2.8rem;
            }
            
            .hero-buttons {
                flex-direction: column;
            }
            
            .filters {
                flex-direction: column;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .cart-drawer {
                max-width: 100%;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
            
            .section-title {
                font-size: 2rem;
            }
        }

        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        
        /* Pulse animation for added to cart */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo " data-page="home">
                    <i class="fas fa-crown"></i>
                    <span>HMShop</span>
                </a>
                
                <nav id="main-nav">
                    <ul>
                        <li><a href="#" class="nav-link active" data-page="home">Home</a></li>
                        <li><a href="#" class="nav-link" data-page="categories">Categories</a></li>
                        <li><a href="#" class="nav-link" data-page="deals">Deals</a></li>
                        <li><a href="#" class="nav-link" data-page="about">About</a></li>
                    </ul>
                </nav>
                
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Search products...">
                </div>
                
                <div class="header-actions">
                    <button class="action-btn" id="shipping-info" title="Shipping Info" data-page="shipping">
                        <i class="fas fa-truck-fast"></i>
                    </button>
                    <button class="action-btn" id="wishlist-btn" title="Wishlist" data-page="wishlist">
                        <i class="far fa-heart"></i>
                        <span class="badge" id="wishlist-count">0</span>
                    </button>
                    <button class="action-btn" id="login-btn" title="Login" data-page="login">
                        <i class="far fa-user"></i>
                    </button>
                    <button class="theme-toggle" id="theme-toggle" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="action-btn" id="cart-btn" title="Shopping Cart">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="badge" id="cart-count">0</span>
                    </button>
                    <button class="mobile-menu-btn" id="mobile-menu-btn">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <div id="home-page" class="page-content active">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content fade-in">
                    <div class="hero-badge">Premium Collection</div>
                    <h1>Discover Exceptional Products</h1>
                    <p>Experience quality you can trust at prices you'll love. Explore our curated collection of premium products designed to elevate your lifestyle.</p>
                    <div class="hero-buttons">
                        <a href="#featured-products" class="btn btn-primary">
                            <i class="fas fa-shopping-bag"></i>
                            Shop Now
                        </a>
                        <a href="#" class="btn btn-outline" id="view-collection" data-page="categories">
                            <i class="fas fa-eye"></i>
                            View Collection
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Featured Products Section -->
        <section class="products-section" id="featured-products">
            <div class="container">
                <h2 class="section-title">Featured Products</h2>
                
                <div class="filters">
                    <div class="filter-group">
                        <label for="category-filter">Category</label>
                        <select id="category-filter">
                            <option value="all">All Categories</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="price-filter">Price Range</label>
                        <div class="price-range">
                            <input type="number" id="min-price" placeholder="Min" min="0" max="2000" step="50">
                            <span>-</span>
                            <input type="number" id="max-price" placeholder="Max" min="0" max="2000" step="50">
                        </div>
                    </div>

                    <div class="filter-group">
                        <label for="size-filter">Size</label>
                        <select id="size-filter">
                            <option value="all">All Sizes</option>
                            <option value="XS">XS</option>
                            <option value="S">S</option>
                            <option value="M">M</option>
                            <option value="L">L</option>
                            <option value="XL">XL</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="color-filter">Color</label>
                        <select id="color-filter">
                            <option value="all">All Colors</option>
                            <option value="black">Black</option>
                            <option value="white">White</option>
                            <option value="blue">Blue</option>
                            <option value="red">Red</option>
                            <option value="green">Green</option>
                            <option value="beige">Beige</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="stock-filter">Availability</label>
                        <select id="stock-filter">
                            <option value="all">All Products</option>
                            <option value="in-stock">In Stock Only</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="sort-filter">Sort By</label>
                        <select id="sort-filter">
                            <option value="featured">Featured</option>
                            <option value="price-asc">Price: Low to High</option>
                            <option value="price-desc">Price: High to Low</option>
                            <option value="rating-desc">Highest Rated</option>
                            <option value="newest">Newest</option>
                            <option value="popularity">Most Popular</option>
                        </select>
                        <span class="filter-note">Sorts apply after filters.</span>
                    </div>
                </div>
                
                <div class="products-grid" id="products-container">
                    <!-- Products will be loaded here -->
                </div>
            </div>
        </section>
    </div>

    <!-- Categories Page -->
    <div id="categories-page" class="page-content">
        <div class="container">
            <h1 class="section-title">All Products</h1>
            
            <div class="filters">
                <div class="filter-group">
                    <label for="category-filter-categories">Category</label>
                    <select id="category-filter-categories">
                        <option value="all">All Categories</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="price-filter-categories">Price Range</label>
                    <div class="price-range">
                        <input type="number" id="min-price-categories" placeholder="Min" min="0" max="2000" step="50">
                        <span>-</span>
                        <input type="number" id="max-price-categories" placeholder="Max" min="0" max="2000" step="50">
                    </div>
                </div>

                <div class="filter-group">
                    <label for="size-filter-categories">Size</label>
                    <select id="size-filter-categories">
                        <option value="all">All Sizes</option>
                        <option value="XS">XS</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="color-filter-categories">Color</label>
                    <select id="color-filter-categories">
                        <option value="all">All Colors</option>
                        <option value="black">Black</option>
                        <option value="white">White</option>
                        <option value="blue">Blue</option>
                        <option value="red">Red</option>
                        <option value="green">Green</option>
                        <option value="beige">Beige</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="stock-filter-categories">Availability</label>
                    <select id="stock-filter-categories">
                        <option value="all">All Products</option>
                        <option value="in-stock">In Stock Only</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="sort-filter-categories">Sort By</label>
                    <select id="sort-filter-categories">
                        <option value="featured">Featured</option>
                        <option value="price-asc">Price: Low to High</option>
                        <option value="price-desc">Price: High to Low</option>
                        <option value="rating-desc">Highest Rated</option>
                        <option value="newest">Newest</option>
                        <option value="popularity">Most Popular</option>
                    </select>
                    <span class="filter-note">Sorts apply after filters.</span>
                </div>
            </div>
            
            <div class="products-grid" id="categories-products-container">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Deals Page -->
    <div id="deals-page" class="page-content">
        <div class="container">
            <h1 class="section-title">Hot Deals</h1>
            <p class="text-center" style="margin-bottom: 2.5rem; color: hsl(var(--muted-foreground)); font-size: 1.2rem;">Discover our best offers and discounted products</p>
            
            <div class="filters">
                <div class="filter-group">
                    <label for="category-filter-deals">Category</label>
                    <select id="category-filter-deals">
                        <option value="all">All Categories</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="price-filter-deals">Price Range</label>
                    <div class="price-range">
                        <input type="number" id="min-price-deals" placeholder="Min" min="0" max="2000" step="50">
                        <span>-</span>
                        <input type="number" id="max-price-deals" placeholder="Max" min="0" max="2000" step="50">
                    </div>
                </div>

                <div class="filter-group">
                    <label for="size-filter-deals">Size</label>
                    <select id="size-filter-deals">
                        <option value="all">All Sizes</option>
                        <option value="XS">XS</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="color-filter-deals">Color</label>
                    <select id="color-filter-deals">
                        <option value="all">All Colors</option>
                        <option value="black">Black</option>
                        <option value="white">White</option>
                        <option value="blue">Blue</option>
                        <option value="red">Red</option>
                        <option value="green">Green</option>
                        <option value="beige">Beige</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="stock-filter-deals">Availability</label>
                    <select id="stock-filter-deals">
                        <option value="all">All Products</option>
                        <option value="in-stock">In Stock Only</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="sort-filter-deals">Sort By</label>
                    <select id="sort-filter-deals">
                        <option value="featured">Featured</option>
                        <option value="price-asc">Price: Low to High</option>
                        <option value="price-desc">Price: High to Low</option>
                        <option value="rating-desc">Highest Rated</option>
                        <option value="newest">Newest</option>
                        <option value="popularity">Most Popular</option>
                    </select>
                    <span class="filter-note">Sorts apply after filters.</span>
                </div>
            </div>
            
            <div class="products-grid" id="deals-products-container">
                <!-- Discounted products will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Product Detail Page -->
    <div id="product-detail-page" class="page-content">
        <div class="container">
            <div id="product-detail-content">
                <!-- Product details will be loaded here -->
            </div>
            
            <div class="related-products">
                <h2 class="section-title">Related Products</h2>
                <div class="products-grid" id="related-products-container">
                    <!-- Related products will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Wishlist Page -->
    <div id="wishlist-page" class="page-content">
        <div class="container">
            <h1 class="section-title">My Wishlist</h1>
            
            <div class="wishlist-container" id="wishlist-container">
                <!-- Wishlist items will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Checkout Page -->
    <div id="checkout-page" class="page-content">
        <div class="container">
            <h1 class="section-title">Checkout</h1>
            
            <div class="checkout-container">
                <div class="checkout-form">
                    <h2 style="margin-bottom: 2rem; font-size: 1.8rem;">Shipping Information</h2>
                    <form id="checkout-form">
                        <div class="form-group">
                            <label for="full-name">Full Name</label>
                            <input type="text" id="full-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="address">Shipping Address</label>
                            <input type="text" id="address" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" id="city" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="zip">ZIP Code</label>
                                <input type="text" id="zip" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="country">Country</label>
                                <select id="country" required>
                                    <option value="">Select Country</option>
                                    <option value="us">United States</option>
                                    <option value="ca">Canada</option>
                                    <option value="uk">United Kingdom</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="phone">Phone Number</label>
                                <input type="tel" id="phone" required>
                            </div>
                        </div>
                        
                        <h2 style="margin: 2.5rem 0 1.5rem; font-size: 1.8rem;">Payment Method</h2>
                        
                        <div class="form-group">
                            <label for="card-name">Name on Card</label>
                            <input type="text" id="card-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="card-number">Card Number</label>
                            <input type="text" id="card-number" placeholder="1234 5678 9012 3456" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="expiry">Expiry Date</label>
                                <input type="text" id="expiry" placeholder="MM/YY" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="cvv">CVV</label>
                                <input type="text" id="cvv" placeholder="123" required>
                            </div>
                        </div>

                        <div class="notification-preferences">
                            <h2 style="margin-bottom: 0.75rem; font-size: 1.4rem;">Order Updates</h2>
                            <p class="filter-note">Choose which emails you want to receive for this order.</p>
                            <label class="checkbox-row">
                                <input type="checkbox" id="notify-confirmation" checked>
                                Send order confirmation email
                            </label>
                            <label class="checkbox-row">
                                <input type="checkbox" id="notify-shipping" checked>
                                Send shipping updates
                            </label>
                        </div>

                        <div class="email-notifications" id="email-notifications">
                            <h3 style="margin-bottom: 0.75rem;">Email Notifications</h3>
                            <div id="notification-list" class="filter-note">No emails sent yet.</div>
                        </div>
                        
                        <button type="submit" class="checkout-btn">Place Order</button>
                    </form>
                </div>
                
                <div class="order-summary">
                    <h2 style="margin-bottom: 2rem; font-size: 1.8rem;">Order Summary</h2>
                    
                    <div class="order-items" id="checkout-items">
                        <!-- Checkout items will be loaded here -->
                    </div>
                    
                    <div class="order-totals">
                        <div class="order-total-row">
                            <span>Subtotal</span>
                            <span id="checkout-subtotal">$0.00</span>
                        </div>
                        <div class="order-total-row">
                            <span>Shipping</span>
                            <span>$9.99</span>
                        </div>
                        <div class="order-total-row">
                            <span>Tax</span>
                            <span id="checkout-tax">$0.00</span>
                        </div>
                        <div class="order-total-row">
                            <span>Total</span>
                            <span id="checkout-total">$0.00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="page-content">
        <div class="container">
            <div class="login-container">
                <h1 class="login-title">Sign In</h1>
                
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" required>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="checkout-btn" style="width: 100%;">Sign In</button>
                    </div>
                    
                    <div class="text-center">
                        <p style="color: hsl(var(--muted-foreground));">Don't have an account? <a href="#" style="color: hsl(var(--primary)); font-weight: 600;">Sign up</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- About Page -->
    <div id="about-page" class="page-content">
        <div class="container">
            <div class="about-content">
                <div class="about-hero">
                    <h1>About HMShop</h1>
                    <p>Your trusted partner for premium products since 2015</p>
                </div>
                
                <div class="about-section">
                    <h2>Our Story</h2>
                    <p>HMShop was founded with a simple mission: to provide customers with access to high-quality products at affordable prices. What started as a small online store has grown into a trusted e-commerce platform serving thousands of customers worldwide.</p>
                    <p>We carefully curate our product selection to ensure that every item meets our strict quality standards. Our team works directly with manufacturers and suppliers to bring you the best products without the traditional retail markup.</p>
                </div>
                
                <div class="about-section">
                    <h2>Our Values</h2>
                    <p>At HMShop, we believe in:</p>
                    <ul>
                        <li><strong>Quality:</strong> We never compromise on product quality</li>
                        <li><strong>Transparency:</strong> We're honest about our products and pricing</li>
                        <li><strong>Customer Focus:</strong> Your satisfaction is our top priority</li>
                        <li><strong>Innovation:</strong> We continuously improve our platform and services</li>
                    </ul>
                </div>
                
                <div class="about-section">
                    <h2>Our Team</h2>
                    <p>Meet the passionate individuals behind HMShop:</p>
                    
                    <div class="team-grid">
                        <div class="team-member">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="John Doe">
                            <h3>John Doe</h3>
                            <p>Founder & CEO</p>
                        </div>
                        
                        <div class="team-member">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Jane Smith">
                            <h3>Jane Smith</h3>
                            <p>Head of Product</p>
                        </div>
                        
                        <div class="team-member">
                            <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Mike Johnson">
                            <h3>Mike Johnson</h3>
                            <p>Customer Experience Manager</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shipping Page -->
    <div id="shipping-page" class="page-content">
        <div class="container">
            <div class="shipping-content">
                <h1 class="section-title">Shipping Information</h1>
                
                <div class="shipping-section">
                    <h2>Delivery Options</h2>
                    <p>We offer several shipping options to meet your needs:</p>
                    
                    <ul>
                        <li><strong>Standard Shipping:</strong> 5-7 business days - $4.99</li>
                        <li><strong>Express Shipping:</strong> 2-3 business days - $9.99</li>
                        <li><strong>Next Day Delivery:</strong> 1 business day - $19.99</li>
                    </ul>
                    
                    <p>Free standard shipping on orders over $50.</p>
                </div>
                
                <div class="shipping-section">
                    <h2>International Shipping</h2>
                    <p>We ship to over 50 countries worldwide. International delivery times vary by location but typically take 7-14 business days. Additional customs fees and taxes may apply for international orders.</p>
                </div>
                
                <div class="shipping-section">
                    <h2>Returns & Exchanges</h2>
                    <p>We want you to be completely satisfied with your purchase. If you're not happy with your order, you can return it within 30 days for a full refund or exchange.</p>
                    
                    <p>To initiate a return, please contact our customer service team with your order number and reason for return. Return shipping is free for defective items, but customers are responsible for return shipping costs for other reasons.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Reports Page -->
    <div id="reports-page" class="page-content">
        <div class="container">
            <h1 class="section-title">Sales Reports</h1>
            
            <div class="reports-container">
                <div class="report-card">
                    <i class="fas fa-shopping-bag" style="font-size: 2.5rem; color: hsl(var(--primary));"></i>
                    <div class="report-value">$24,580</div>
                    <div class="report-label">Total Revenue</div>
                </div>
                
                <div class="report-card">
                    <i class="fas fa-chart-line" style="font-size: 2.5rem; color: hsl(var(--primary));"></i>
                    <div class="report-value">328</div>
                    <div class="report-label">Orders This Month</div>
                </div>
                
                <div class="report-card">
                    <i class="fas fa-users" style="font-size: 2.5rem; color: hsl(var(--primary));"></i>
                    <div class="report-value">1,247</div>
                    <div class="report-label">Active Customers</div>
                </div>
                
                <div class="report-card">
                    <i class="fas fa-star" style="font-size: 2.5rem; color: hsl(var(--primary));"></i>
                    <div class="report-value">4.8</div>
                    <div class="report-label">Average Rating</div>
                </div>
            </div>
            
            <div style="margin-top: 4rem;">
                <h2 style="margin-bottom: 2rem; font-size: 2rem; text-align: center;">Top Selling Products</h2>
                <div class="products-grid" id="top-products-container">
                    <!-- Top products will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- 404 Page -->
    <div id="not-found-page" class="page-content">
        <div class="container">
            <div class="not-found">
                <h1>404</h1>
                <h2>Page Not Found</h2>
                <p>The page you are looking for doesn't exist or has been moved.</p>
                <a href="#" class="btn btn-primary" data-page="home">
                    <i class="fas fa-home"></i>
                    Back to Home
                </a>
            </div>
        </div>
    </div>

    <!-- Cart Drawer -->
    <div class="cart-drawer" id="cart-drawer">
        <div class="cart-header">
            <h3 class="cart-title">Shopping Cart (<span id="cart-items-count">0</span>)</h3>
            <button class="close-cart" id="close-cart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="cart-items" id="cart-items">
            <!-- Cart items will be loaded here -->
        </div>
        
        <div class="cart-footer">
            <div class="cart-totals">
                <div class="total-row">
                    <span>Subtotal</span>
                    <span id="cart-subtotal">$0.00</span>
                </div>
                <div class="total-row">
                    <span>Shipping</span>
                    <span>Calculated at checkout</span>
                </div>
                <div class="total-row">
                    <span>Total</span>
                    <span id="cart-total">$0.00</span>
                </div>
            </div>
            
            <button class="checkout-btn" id="checkout-btn" data-page="checkout">Proceed to Checkout</button>
            <a href="#" class="continue-shopping" id="continue-shopping">Continue Shopping</a>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Product added to cart!</span>
    </div>

    <!-- Compare Bar -->
    <div class="compare-bar" id="compare-bar">
        <div class="container">
            <div class="compare-content">
                <div>
                    <strong>Compare</strong> (<span id="compare-count">0</span> selected)
                </div>
                <div class="compare-items" id="compare-items"></div>
                <div class="compare-actions">
                    <button class="compare-link" id="compare-clear">Clear</button>
                    <button class="compare-btn" id="compare-open">Compare</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Compare Modal -->
    <div class="compare-modal" id="compare-modal">
        <div class="compare-card">
            <div class="modal-header">
                <h2>Product Comparison</h2>
                <button class="modal-close" id="compare-close" aria-label="Close comparison">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="compare-table"></div>
        </div>
    </div>

    <!-- Size Guide Modal -->
    <div class="modal" id="size-guide-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Size Guide</h2>
                <button class="modal-close" id="size-guide-close" aria-label="Close size guide">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <p style="color: hsl(var(--muted-foreground)); margin-bottom: 1rem;">Use this guide to choose the best fit for your measurements.</p>
            <table class="compare-table">
                <thead>
                    <tr>
                        <th>Size</th>
                        <th>Chest (in)</th>
                        <th>Waist (in)</th>
                        <th>Hip (in)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>XS</td>
                        <td>32-34</td>
                        <td>26-28</td>
                        <td>32-34</td>
                    </tr>
                    <tr>
                        <td>S</td>
                        <td>35-37</td>
                        <td>29-31</td>
                        <td>35-37</td>
                    </tr>
                    <tr>
                        <td>M</td>
                        <td>38-40</td>
                        <td>32-34</td>
                        <td>38-40</td>
                    </tr>
                    <tr>
                        <td>L</td>
                        <td>41-43</td>
                        <td>35-37</td>
                        <td>41-43</td>
                    </tr>
                    <tr>
                        <td>XL</td>
                        <td>44-46</td>
                        <td>38-40</td>
                        <td>44-46</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Scroll to Top -->
    <div class="scroll-to-top" id="scroll-to-top">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Shop</h3>
                    <ul>
                        <li><a href="#" data-page="categories">All Products</a></li>
                        <li><a href="#" data-page="home">Featured Items</a></li>
                        <li><a href="#" data-page="deals">On Sale</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Customer Service</h3>
                    <ul>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#" data-page="shipping">Shipping Policy</a></li>
                        <li><a href="#" data-page="shipping">Returns & Refunds</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Company</h3>
                    <ul>
                        <li><a href="#" data-page="about">About Us</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Connect With Us</h3>
                    <ul>
                        <li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                        <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                        <li><a href="#"><i class="fab fa-pinterest"></i> Pinterest</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                &copy; 2025 HMShop. All rights reserved.
            </div>
        </div>
    </footer>
    <script>
        // Global state
        const state = {
            products: [],
            cart: [],
            wishlist: [],
            compare: [],
            notifications: [],
            currentPage: 'home',
            theme: localStorage.getItem('theme') || 'light',
            currentProduct: null
        };

        // DOM Elements
        const elements = {
            // Navigation
            navLinks: document.querySelectorAll('.nav-link'),
            mobileMenuBtn: document.getElementById('mobile-menu-btn'),
            mainNav: document.getElementById('main-nav'),
            
            // Pages
            pages: document.querySelectorAll('.page-content'),
            
            // Theme
            themeToggle: document.getElementById('theme-toggle'),
            themeIcon: document.querySelector('#theme-toggle i'),
            
            // Search
            searchInput: document.getElementById('search-input'),
            
            // Products
            productsContainer: document.getElementById('products-container'),
            categoriesProductsContainer: document.getElementById('categories-products-container'),
            dealsProductsContainer: document.getElementById('deals-products-container'),
            topProductsContainer: document.getElementById('top-products-container'),
            relatedProductsContainer: document.getElementById('related-products-container'),
            categoryFilter: document.getElementById('category-filter'),
            minPrice: document.getElementById('min-price'),
            maxPrice: document.getElementById('max-price'),
            stockFilter: document.getElementById('stock-filter'),
            sizeFilter: document.getElementById('size-filter'),
            colorFilter: document.getElementById('color-filter'),
            sortFilter: document.getElementById('sort-filter'),
            
            // Product Detail
            productDetailContent: document.getElementById('product-detail-content'),
            
            // Wishlist
            wishlistContainer: document.getElementById('wishlist-container'),
            
            // Checkout
            checkoutItems: document.getElementById('checkout-items'),
            checkoutSubtotal: document.getElementById('checkout-subtotal'),
            checkoutTax: document.getElementById('checkout-tax'),
            checkoutTotal: document.getElementById('checkout-total'),
            checkoutForm: document.getElementById('checkout-form'),
            notifyConfirmation: document.getElementById('notify-confirmation'),
            notifyShipping: document.getElementById('notify-shipping'),
            emailNotifications: document.getElementById('email-notifications'),
            notificationList: document.getElementById('notification-list'),
            
            // Cart
            cartBtn: document.getElementById('cart-btn'),
            cartDrawer: document.getElementById('cart-drawer'),
            closeCart: document.getElementById('close-cart'),
            cartItems: document.getElementById('cart-items'),
            cartCount: document.getElementById('cart-count'),
            cartItemsCount: document.getElementById('cart-items-count'),
            cartSubtotal: document.getElementById('cart-subtotal'),
            cartTotal: document.getElementById('cart-total'),
            checkoutBtn: document.getElementById('checkout-btn'),
            continueShopping: document.getElementById('continue-shopping'),
            overlay: document.getElementById('overlay'),
            
            // Wishlist
            wishlistBtn: document.getElementById('wishlist-btn'),
            wishlistCount: document.getElementById('wishlist-count'),
            
            // Toast
            toast: document.getElementById('toast'),
            toastMessage: document.getElementById('toast-message'),
            
            // Scroll to top
            scrollToTop: document.getElementById('scroll-to-top'),

            // Compare
            compareBar: document.getElementById('compare-bar'),
            compareItems: document.getElementById('compare-items'),
            compareCount: document.getElementById('compare-count'),
            compareOpen: document.getElementById('compare-open'),
            compareClear: document.getElementById('compare-clear'),
            compareModal: document.getElementById('compare-modal'),
            compareClose: document.getElementById('compare-close'),
            compareTable: document.getElementById('compare-table'),

            // Size guide
            sizeGuideModal: document.getElementById('size-guide-modal'),
            sizeGuideClose: document.getElementById('size-guide-close')
        };

        // Initialize the application
        function init() {
            // Set initial theme
            setTheme(state.theme);
            
            // Load products from API
            loadProducts();
            
            // Load cart and wishlist from localStorage
            loadCart();
            loadWishlist();
            
            // Set up event listeners
            setupEventListeners();
            
            // Update UI
            updateCartUI();
            updateWishlistUI();
            updateCompareUI();
            renderNotifications();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Navigation
            elements.navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = e.target.getAttribute('data-page');
                    navigateToPage(page);
                });
            });
            
            // Header action buttons
            const shippingInfoBtn = document.getElementById('shipping-info');
            if (shippingInfoBtn) {
                shippingInfoBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateToPage('shipping');
                });
            }
            
            elements.wishlistBtn.addEventListener('click', (e) => {
                e.preventDefault();
                navigateToPage('wishlist');
            });
            
            const loginBtn = document.getElementById('login-btn');
            if (loginBtn) {
                loginBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateToPage('login');
                });
            }
            
            const viewCollectionBtn = document.getElementById('view-collection');
            if (viewCollectionBtn) {
                viewCollectionBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateToPage('categories');
                });
            }
            
            elements.mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            
            // Theme toggle
            elements.themeToggle.addEventListener('click', toggleTheme);
            
            // Search
            elements.searchInput.addEventListener('input', function() {
                filterProducts();
                
                // If we're not on a product listing page, navigate to categories
                if (!['home', 'categories', 'deals'].includes(state.currentPage)) {
                    navigateToPage('categories');
                }
            });
            
            // Setup filter event listeners for all pages
            setupFilterEventListeners();
            
            // Cart
            elements.cartBtn.addEventListener('click', openCart);
            elements.closeCart.addEventListener('click', closeCart);
            elements.overlay.addEventListener('click', closeOverlays);
            elements.continueShopping.addEventListener('click', closeCart);
            elements.checkoutBtn.addEventListener('click', (e) => {
                e.preventDefault();
                closeCart();
                navigateToPage('checkout');
            });

            // Compare
            if (elements.compareOpen) {
                elements.compareOpen.addEventListener('click', openCompareModal);
            }
            if (elements.compareClear) {
                elements.compareClear.addEventListener('click', clearCompare);
            }
            if (elements.compareClose) {
                elements.compareClose.addEventListener('click', closeCompareModal);
            }

            // Size guide
            if (elements.sizeGuideClose) {
                elements.sizeGuideClose.addEventListener('click', closeSizeGuideModal);
            }
            
            // Checkout form
            if (elements.checkoutForm) {
                elements.checkoutForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    processOrder();
                });
            }
            
            // Login form
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    handleLogin();
                });
            }
            
            // Footer links
            document.querySelectorAll('footer a[data-page]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = e.target.getAttribute('data-page');
                    navigateToPage(page);
                });
            });
            
            // Scroll to top
            elements.scrollToTop.addEventListener('click', scrollToTop);
            window.addEventListener('scroll', toggleScrollToTop);
        }

        // Setup filter event listeners for all pages
        function setupFilterEventListeners() {
            // Home page filters
            if (elements.categoryFilter) {
                elements.categoryFilter.addEventListener('change', filterProducts);
            }
            if (elements.minPrice) {
                elements.minPrice.addEventListener('input', filterProducts);
            }
            if (elements.maxPrice) {
                elements.maxPrice.addEventListener('input', filterProducts);
            }
            if (elements.stockFilter) {
                elements.stockFilter.addEventListener('change', filterProducts);
            }
            if (elements.sizeFilter) {
                elements.sizeFilter.addEventListener('change', filterProducts);
            }
            if (elements.colorFilter) {
                elements.colorFilter.addEventListener('change', filterProducts);
            }
            if (elements.sortFilter) {
                elements.sortFilter.addEventListener('change', filterProducts);
            }
            
            // Categories page filters
            const categoryFilterCategories = document.getElementById('category-filter-categories');
            const minPriceCategories = document.getElementById('min-price-categories');
            const maxPriceCategories = document.getElementById('max-price-categories');
            const stockFilterCategories = document.getElementById('stock-filter-categories');
            const sizeFilterCategories = document.getElementById('size-filter-categories');
            const colorFilterCategories = document.getElementById('color-filter-categories');
            const sortFilterCategories = document.getElementById('sort-filter-categories');
            
            if (categoryFilterCategories) {
                categoryFilterCategories.addEventListener('change', filterProducts);
            }
            if (minPriceCategories) {
                minPriceCategories.addEventListener('input', filterProducts);
            }
            if (maxPriceCategories) {
                maxPriceCategories.addEventListener('input', filterProducts);
            }
            if (stockFilterCategories) {
                stockFilterCategories.addEventListener('change', filterProducts);
            }
            if (sizeFilterCategories) {
                sizeFilterCategories.addEventListener('change', filterProducts);
            }
            if (colorFilterCategories) {
                colorFilterCategories.addEventListener('change', filterProducts);
            }
            if (sortFilterCategories) {
                sortFilterCategories.addEventListener('change', filterProducts);
            }
            
            // Deals page filters
            const categoryFilterDeals = document.getElementById('category-filter-deals');
            const minPriceDeals = document.getElementById('min-price-deals');
            const maxPriceDeals = document.getElementById('max-price-deals');
            const stockFilterDeals = document.getElementById('stock-filter-deals');
            const sizeFilterDeals = document.getElementById('size-filter-deals');
            const colorFilterDeals = document.getElementById('color-filter-deals');
            const sortFilterDeals = document.getElementById('sort-filter-deals');
            
            if (categoryFilterDeals) {
                categoryFilterDeals.addEventListener('change', filterProducts);
            }
            if (minPriceDeals) {
                minPriceDeals.addEventListener('input', filterProducts);
            }
            if (maxPriceDeals) {
                maxPriceDeals.addEventListener('input', filterProducts);
            }
            if (stockFilterDeals) {
                stockFilterDeals.addEventListener('change', filterProducts);
            }
            if (sizeFilterDeals) {
                sizeFilterDeals.addEventListener('change', filterProducts);
            }
            if (colorFilterDeals) {
                colorFilterDeals.addEventListener('change', filterProducts);
            }
            if (sortFilterDeals) {
                sortFilterDeals.addEventListener('change', filterProducts);
            }
        }

        // Navigation
        function navigateToPage(page) {
            // Hide all pages
            elements.pages.forEach(p => p.classList.remove('active'));
            
            // Show the selected page
            const targetPage = document.getElementById(`${page}-page`);
            if (targetPage) {
                targetPage.classList.add('active');
            } else {
                // If page doesn't exist, show 404
                document.getElementById('not-found-page').classList.add('active');
                page = 'not-found';
            }
            
            // Update active nav link
            elements.navLinks.forEach(link => {
                if (link.getAttribute('data-page') === page) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
            
            // Update page title
            document.title = `HMShop | ${page.charAt(0).toUpperCase() + page.slice(1)}`;
            
            // Handle page-specific logic
            handlePageChange(page);
            
            // Close mobile menu if open
            if (window.innerWidth <= 768) {
                elements.mainNav.classList.remove('show');
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
            
            // Update current page
            state.currentPage = page;
        }

        function handlePageChange(page) {
            switch(page) {
                case 'categories':
                    displayProducts(state.products, elements.categoriesProductsContainer);
                    break;
                case 'deals':
                    const discountedProducts = state.products.filter(product => product.discountPercentage > 0);
                    displayProducts(discountedProducts, elements.dealsProductsContainer);
                    break;
                case 'wishlist':
                    displayWishlist();
                    break;
                case 'checkout':
                    displayCheckout();
                    break;
                case 'reports':
                    displayTopProducts();
                    break;
            }
        }

        function toggleMobileMenu() {
            elements.mainNav.classList.toggle('show');
        }

        // Load products from API
        async function loadProducts() {
            try {
                // Show loading state
                if (elements.productsContainer) {
                    elements.productsContainer.innerHTML = '<div class="fade-in" style="text-align: center; padding: 3rem; font-size: 1.2rem;">Loading products...</div>';
                }
                
                // Fetch all products from DummyJSON API
                const response = await fetch('https://dummyjson.com/products?limit=100');
                const data = await response.json();

                const colorOptions = [
                    { name: 'Black', value: 'black', hex: '#111827' },
                    { name: 'White', value: 'white', hex: '#f9fafb' },
                    { name: 'Blue', value: 'blue', hex: '#2563eb' },
                    { name: 'Red', value: 'red', hex: '#ef4444' },
                    { name: 'Green', value: 'green', hex: '#10b981' },
                    { name: 'Beige', value: 'beige', hex: '#d6c7b0' }
                ];
                const sizeSets = [
                    ['XS', 'S', 'M', 'L'],
                    ['S', 'M', 'L', 'XL'],
                    ['XS', 'S', 'M'],
                    ['M', 'L', 'XL'],
                    ['S', 'M', 'L']
                ];
                
                // Transform API data to our format
                state.products = data.products.map(product => {
                    const color = colorOptions[product.id % colorOptions.length];
                    const sizes = sizeSets[product.id % sizeSets.length];
                    const reviews = generateMockReviews(product, Math.max(3, Math.min(6, Math.floor(product.rating))));

                    return {
                    id: product.id,
                    name: product.title,
                    description: product.description,
                    price: product.price,
                    originalPrice: Math.round(product.price / (1 - product.discountPercentage / 100)),
                    discountPercentage: Math.round(product.discountPercentage),
                    category: product.category,
                    image: product.thumbnail,
                    images: product.images || [product.thumbnail],
                    rating: product.rating,
                    reviewCount: reviews.length,
                    reviews,
                    stock: product.stock,
                    brand: product.brand,
                    dimensions: `${Math.floor(Math.random() * 50) + 10} x ${Math.floor(Math.random() * 30) + 5} x ${Math.floor(Math.random() * 20) + 2} cm`,
                    weight: `${Math.floor(Math.random() * 5) + 0.5} kg`,
                    features: product.description.split(' ').slice(0, 10).join(' ') + '...',
                    sizes,
                    color: color.value,
                    colorName: color.name,
                    colorHex: color.hex,
                    createdAt: Date.now() - (product.id * 86400000)
                };
                });
                
                // Populate category filter
                populateCategoryFilter();
                
                // Display products on home page
                displayProducts(state.products, elements.productsContainer);
                
                // Display top products on reports page
                displayTopProducts();
            } catch (error) {
                console.error('Error loading products:', error);
                if (elements.productsContainer) {
                    elements.productsContainer.innerHTML = '<div class="fade-in" style="text-align: center; padding: 3rem; font-size: 1.2rem;">Error loading products. Please try again later.</div>';
                }
            }
        }

        // Populate category filter dropdown
        function populateCategoryFilter() {
            const categories = [...new Set(state.products.map(product => product.category))];
            const filterSelectors = [
                elements.categoryFilter,
                document.getElementById('category-filter-categories'),
                document.getElementById('category-filter-deals')
            ];
            
            filterSelectors.forEach(selector => {
                if (selector) {
                    // Clear existing options except the first one
                    while (selector.children.length > 1) {
                        selector.removeChild(selector.lastChild);
                    }
                    
                    categories.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                        selector.appendChild(option);
                    });
                }
            });
        }

        // Display products in the grid
        function displayProducts(products, container) {
            if (!container) return;
            
            if (products.length === 0) {
                container.innerHTML = '<div class="fade-in" style="text-align: center; padding: 3rem; font-size: 1.2rem;">No products found matching your criteria.</div>';
                return;
            }
            
            container.innerHTML = '';
            
            products.forEach((product, index) => {
                const productCard = createProductCard(product, index);
                container.appendChild(productCard);
            });
        }

        // Display top products for reports page
        function displayTopProducts() {
            if (!elements.topProductsContainer) return;
            
            // Sort by rating and take top 4
            const topProducts = [...state.products]
                .sort((a, b) => b.rating - a.rating)
                .slice(0, 4);
            
            displayProducts(topProducts, elements.topProductsContainer);
        }

        // Create product card HTML
        function createProductCard(product, index) {
            const card = document.createElement('div');
            card.className = `product-card fade-in stagger-${(index % 3) + 1}`;
            
            const isInWishlist = state.wishlist.some(item => item.id === product.id);
            const isOutOfStock = product.stock === 0;
            const isLowStock = product.stock > 0 && product.stock <= 3;
            const isInCompare = state.compare.some(item => item.id === product.id);
            
            card.innerHTML = `
                <div class="product-image-container">
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-badges">
                        <span class="badge-category">${product.category}</span>
                        ${product.discountPercentage > 0 ? `<span class="badge-discount">-${product.discountPercentage}%</span>` : ''}
                    </div>
                    ${isOutOfStock ? '<div class="out-of-stock">Out of Stock</div>' : ''}
                </div>
                <div class="product-info">
                    <h3 class="product-name">${product.name}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="product-meta-row">
                        <span class="color-label"><span class="color-swatch" style="background:${product.colorHex}"></span>${product.colorName}</span>
                        <span>Sizes: ${product.sizes.join(', ')}</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">$${product.price.toFixed(2)}</span>
                        ${product.discountPercentage > 0 ? `<span class="original-price">$${product.originalPrice.toFixed(2)}</span>` : ''}
                    </div>
                    ${isLowStock ? `<div><span class="low-stock"><i class="fas fa-fire"></i>Only ${product.stock} left!</span></div>` : ''}
                    <div class="product-rating">
                        <div class="stars">
                            ${generateStarRating(product.rating)}
                        </div>
                        <span class="rating-count">(${product.reviewCount})</span>
                    </div>
                    <div class="product-actions">
                        <button class="btn-add-to-cart" ${isOutOfStock ? 'disabled' : ''} data-id="${product.id}">
                            <i class="fas fa-shopping-cart"></i>
                            ${isOutOfStock ? 'Out of Stock' : 'Add to Cart'}
                        </button>
                        <button class="btn-compare ${isInCompare ? 'active' : ''}" data-id="${product.id}" title="Compare">
                            <i class="fas fa-balance-scale"></i>
                        </button>
                        <button class="btn-wishlist ${isInWishlist ? 'active' : ''}" data-id="${product.id}">
                            <i class="${isInWishlist ? 'fas' : 'far'} fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;
            
            // Add event listeners to buttons
            const addToCartBtn = card.querySelector('.btn-add-to-cart');
            const wishlistBtn = card.querySelector('.btn-wishlist');
            const compareBtn = card.querySelector('.btn-compare');
            
            if (!isOutOfStock) {
                addToCartBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    addToCartWithAnimation(product, addToCartBtn);
                });
            }
            
            wishlistBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleWishlist(product, wishlistBtn);
            });

            compareBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleCompare(product, compareBtn);
            });
            
            // Add click event to product card to view details
            card.addEventListener('click', (e) => {
                if (!e.target.closest('button')) {
                    viewProductDetails(product);
                }
            });
            
            return card;
        }

        // Add to cart with animation
        function addToCartWithAnimation(product, button) {
            // Add the product to cart
            addToCart(product);
            
            // Change button style to indicate added
            button.classList.add('added', 'pulse');
            button.innerHTML = '<i class="fas fa-check"></i> Added';
            
            // Revert button after 2 seconds
            setTimeout(() => {
                button.classList.remove('added', 'pulse');
                button.innerHTML = '<i class="fas fa-shopping-cart"></i> Add to Cart';
            }, 2000);
        }

        // View product details
        function viewProductDetails(product) {
            state.currentProduct = product;
            
            if (!elements.productDetailContent) return;
            
            // Get related products (same category)
            const relatedProducts = state.products
                .filter(p => p.category === product.category && p.id !== product.id)
                .slice(0, 4);
            
            // Generate product detail HTML
            elements.productDetailContent.innerHTML = `
                <div class="product-detail">
                    <div class="product-gallery">
                        <img src="${product.images[0]}" alt="${product.name}" class="main-image" id="main-product-image">
                        <div class="thumbnail-container">
                            ${product.images.map((img, index) => `
                                <img src="${img}" alt="${product.name}" class="thumbnail ${index === 0 ? 'active' : ''}" data-index="${index}">
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="product-info-detail">
                        <h1 class="product-title">${product.name}</h1>
                        
                        <div class="product-meta">
                            <span class="badge-category">${product.category}</span>
                            <div class="product-rating">
                                <div class="stars">
                                    ${generateStarRating(product.rating)}
                                </div>
                                <span class="rating-count">(${product.reviewCount} reviews)</span>
                            </div>
                        </div>
                        
                        <div class="product-price-detail">
                            <span class="current-price-large">$${product.price.toFixed(2)}</span>
                            ${product.discountPercentage > 0 ? `
                                <span class="original-price-large">$${product.originalPrice.toFixed(2)}</span>
                                <span class="discount-badge-large">Save ${product.discountPercentage}%</span>
                            ` : ''}
                        </div>

                        ${product.stock > 0 && product.stock <= 3 ? `
                            <div class="low-stock"><i class="fas fa-fire"></i>Only ${product.stock} left!</div>
                        ` : ''}

                        <div class="variant-row">
                            <span class="variant-label">Color:</span>
                            <span class="color-label"><span class="color-swatch" style="background:${product.colorHex}"></span>${product.colorName}</span>
                        </div>

                        <div class="variant-row">
                            <span class="variant-label">Size:</span>
                            <div class="size-options" id="detail-size-options">
                                ${product.sizes.map((size, idx) => `
                                    <button class="size-option ${idx === 0 ? 'active' : ''}" type="button" data-size="${size}">${size}</button>
                                `).join('')}
                            </div>
                            <button class="compare-link" id="open-size-guide" type="button">Size guide</button>
                        </div>
                        
                        <p class="product-description-detail">${product.description}</p>
                        
                        <div class="product-actions-detail">
                            <div class="quantity-selector">
                                <label for="product-quantity" style="font-weight: 600;">Qty:</label>
                                <input type="number" id="product-quantity" class="quantity-input" value="1" min="1" max="${product.stock}">
                            </div>
                            <button class="btn-add-to-cart-large" ${product.stock === 0 ? 'disabled' : ''} id="detail-add-to-cart">
                                <i class="fas fa-shopping-cart"></i>
                                ${product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}
                            </button>
                            <button class="btn-compare ${state.compare.some(item => item.id === product.id) ? 'active' : ''}" id="detail-compare" type="button">
                                <i class="fas fa-balance-scale"></i>
                            </button>
                            <button class="btn-wishlist ${state.wishlist.some(item => item.id === product.id) ? 'active' : ''}" data-id="${product.id}">
                                <i class="${state.wishlist.some(item => item.id === product.id) ? 'fas' : 'far'} fa-heart"></i>
                            </button>
                        </div>
                        
                        <div class="product-specs">
                            <h3 style="margin-bottom: 1.5rem; font-size: 1.5rem;">Product Details</h3>
                            <table class="specs-table">
                                <tr>
                                    <td>Brand</td>
                                    <td>${product.brand || 'Unknown'}</td>
                                </tr>
                                <tr>
                                    <td>Category</td>
                                    <td>${product.category}</td>
                                </tr>
                                <tr>
                                    <td>Dimensions</td>
                                    <td>${product.dimensions}</td>
                                </tr>
                                <tr>
                                    <td>Weight</td>
                                    <td>${product.weight}</td>
                                </tr>
                                <tr>
                                    <td>Color</td>
                                    <td>${product.colorName}</td>
                                </tr>
                                <tr>
                                    <td>Sizes</td>
                                    <td>${product.sizes.join(', ')}</td>
                                </tr>
                                <tr>
                                    <td>Stock</td>
                                    <td>${product.stock} units available</td>
                                </tr>
                            </table>
                        </div>

                        <div class="reviews-section" id="reviews-section">
                            <h3 style="margin-bottom: 1.5rem; font-size: 1.5rem;">Customer Reviews</h3>
                            ${renderReviews(product)}
                            <div class="review-form">
                                <h4 style="margin-bottom: 1rem;">Write a review</h4>
                                <form id="review-form">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="review-name">Name</label>
                                            <input type="text" id="review-name" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="review-rating">Rating</label>
                                            <select id="review-rating" required>
                                                <option value="5">5 - Excellent</option>
                                                <option value="4">4 - Good</option>
                                                <option value="3">3 - Average</option>
                                                <option value="2">2 - Fair</option>
                                                <option value="1">1 - Poor</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="review-comment">Review</label>
                                        <textarea id="review-comment" required></textarea>
                                    </div>
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fas fa-paper-plane"></i>
                                        Submit Review
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners for product detail page
            const thumbnails = elements.productDetailContent.querySelectorAll('.thumbnail');
            const mainImage = elements.productDetailContent.getElementById('main-product-image');
            const addToCartBtn = elements.productDetailContent.getElementById('detail-add-to-cart');
            const wishlistBtn = elements.productDetailContent.querySelector('.btn-wishlist');
            const quantityInput = elements.productDetailContent.getElementById('product-quantity');
            const compareBtn = elements.productDetailContent.getElementById('detail-compare');
            const sizeGuideBtn = elements.productDetailContent.getElementById('open-size-guide');
            const sizeOptions = elements.productDetailContent.querySelectorAll('.size-option');
            const reviewForm = elements.productDetailContent.getElementById('review-form');
            
            // Thumbnail click events
            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', () => {
                    const index = thumb.getAttribute('data-index');
                    mainImage.src = product.images[index];
                    
                    thumbnails.forEach(t => t.classList.remove('active'));
                    thumb.classList.add('active');
                });
            });
            
            // Add to cart button
            if (addToCartBtn && product.stock > 0) {
                addToCartBtn.addEventListener('click', () => {
                    const quantity = parseInt(quantityInput.value) || 1;
                    for (let i = 0; i < quantity; i++) {
                        addToCart(product);
                    }
                    
                    // Add animation to button
                    addToCartBtn.classList.add('added', 'pulse');
                    addToCartBtn.innerHTML = '<i class="fas fa-check"></i> Added';
                    
                    // Revert button after 2 seconds
                    setTimeout(() => {
                        addToCartBtn.classList.remove('added', 'pulse');
                        addToCartBtn.innerHTML = '<i class="fas fa-shopping-cart"></i> Add to Cart';
                    }, 2000);
                    
                    showToast(`${quantity} ${product.name} added to cart`, 'success');
                });
            }
            
            // Wishlist button
            if (wishlistBtn) {
                wishlistBtn.addEventListener('click', () => {
                    toggleWishlist(product, wishlistBtn);
                });
            }

            if (compareBtn) {
                compareBtn.addEventListener('click', () => {
                    toggleCompare(product, compareBtn);
                });
            }

            if (sizeGuideBtn) {
                sizeGuideBtn.addEventListener('click', openSizeGuideModal);
            }

            sizeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    sizeOptions.forEach(btn => btn.classList.remove('active'));
                    option.classList.add('active');
                });
            });

            if (reviewForm) {
                reviewForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const reviewer = elements.productDetailContent.getElementById('review-name').value.trim();
                    const rating = parseInt(elements.productDetailContent.getElementById('review-rating').value, 10);
                    const comment = elements.productDetailContent.getElementById('review-comment').value.trim();

                    if (!reviewer || !comment) {
                        showToast('Please complete your review', 'error');
                        return;
                    }

                    const newReview = {
                        author: reviewer,
                        rating,
                        comment,
                        date: new Date().toISOString()
                    };

                    product.reviews.unshift(newReview);
                    product.reviewCount = product.reviews.length;
                    product.rating = calculateAverageRating(product.reviews);

                    updateReviewSection(product);
                    showToast('Thanks for your review!', 'success');
                    reviewForm.reset();
                });
            }
            
            // Display related products
            displayProducts(relatedProducts, elements.relatedProductsContainer);
            
            // Navigate to product detail page
            navigateToPage('product-detail');
        }

        // Generate star rating HTML
        function generateStarRating(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 1; i <= 5; i++) {
                if (i <= fullStars) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i === fullStars + 1 && hasHalfStar) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            
            return stars;
        }

        function clamp(value, min, max) {
            return Math.min(Math.max(value, min), max);
        }

        function generateMockReviews(product, count) {
            const reviewers = ['Alex', 'Jordan', 'Taylor', 'Morgan', 'Casey', 'Riley', 'Sam', 'Jamie'];
            const comments = [
                'Excellent quality and fast delivery.',
                'Looks even better in person.',
                'Great value for the price.',
                'Comfortable and well made.',
                'I would definitely buy again.',
                'Packaging was premium and secure.',
                'Fits perfectly and feels durable.',
                'Stylish and exactly as described.'
            ];
            const reviews = [];

            for (let i = 0; i < count; i++) {
                const rating = clamp(Math.round(product.rating + (Math.random() * 2 - 1)), 1, 5);
                reviews.push({
                    author: reviewers[(product.id + i) % reviewers.length],
                    rating,
                    comment: comments[(product.id + i) % comments.length],
                    date: new Date(Date.now() - (i + 1) * 86400000).toISOString()
                });
            }

            return reviews;
        }

        function calculateAverageRating(reviews) {
            if (!reviews || reviews.length === 0) return 0;
            const total = reviews.reduce((sum, review) => sum + review.rating, 0);
            return Math.round((total / reviews.length) * 10) / 10;
        }

        function formatDateLabel(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        function renderReviewListHTML(product) {
            const reviews = product.reviews || [];
            if (reviews.length === 0) {
                return '<div class="filter-note">No reviews yet. Be the first to share your thoughts.</div>';
            }

            return `
                <div class="review-list">
                    ${reviews.slice(0, 6).map(review => `
                        <div class="review-card">
                            <div class="review-meta">
                                <div>
                                    <div class="review-author">${review.author}</div>
                                    <div class="stars">${generateStarRating(review.rating)}</div>
                                </div>
                                <div class="review-date">${formatDateLabel(review.date)}</div>
                            </div>
                            <p>${review.comment}</p>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderReviews(product) {
            return renderReviewListHTML(product);
        }

        function updateReviewSection(product) {
            if (!elements.productDetailContent) return;
            const section = elements.productDetailContent.querySelector('#reviews-section');
            if (!section) return;

            const existingList = section.querySelector('.review-list');
            const existingNote = section.querySelector('.filter-note');
            const updatedMarkup = renderReviewListHTML(product);

            if (existingList) {
                existingList.outerHTML = updatedMarkup;
            } else if (existingNote) {
                existingNote.outerHTML = updatedMarkup;
            } else {
                section.insertAdjacentHTML('afterbegin', updatedMarkup);
            }

            const ratingCount = elements.productDetailContent.querySelector('.product-rating .rating-count');
            const stars = elements.productDetailContent.querySelector('.product-rating .stars');
            if (ratingCount) {
                ratingCount.textContent = `(${product.reviewCount} reviews)`;
            }
            if (stars) {
                stars.innerHTML = generateStarRating(product.rating);
            }
        }

        function sortProducts(products, sortValue) {
            if (!products || products.length === 0) return [];
            if (sortValue === 'featured') return products;

            const sorted = [...products];

            switch (sortValue) {
                case 'price-asc':
                    sorted.sort((a, b) => a.price - b.price);
                    break;
                case 'price-desc':
                    sorted.sort((a, b) => b.price - a.price);
                    break;
                case 'rating-desc':
                    sorted.sort((a, b) => b.rating - a.rating);
                    break;
                case 'newest':
                    sorted.sort((a, b) => b.createdAt - a.createdAt);
                    break;
                case 'popularity':
                    sorted.sort((a, b) => b.reviewCount - a.reviewCount);
                    break;
                default:
                    break;
            }

            return sorted;
        }

        function toggleCompare(product, button) {
            const existingIndex = state.compare.findIndex(item => item.id === product.id);

            if (existingIndex >= 0) {
                state.compare.splice(existingIndex, 1);
                showToast(`${product.name} removed from compare`, 'error');
                syncCompareButtons(product.id, false);
            } else {
                if (state.compare.length >= 3) {
                    showToast('Compare up to 3 products at once', 'error');
                    return;
                }
                state.compare.push(product);
                showToast(`${product.name} added to compare`, 'success');
                syncCompareButtons(product.id, true);
            }

            if (button) {
                button.classList.toggle('active', state.compare.some(item => item.id === product.id));
            }

            updateCompareUI();
        }

        function syncCompareButtons(productId, isActive) {
            document.querySelectorAll(`.btn-compare[data-id="${productId}"]`).forEach(btn => {
                btn.classList.toggle('active', isActive);
            });

            const detailCompare = document.getElementById('detail-compare');
            if (detailCompare) {
                detailCompare.classList.toggle('active', isActive);
            }
        }

        function updateCompareUI() {
            if (!elements.compareBar || !elements.compareItems || !elements.compareCount) return;

            elements.compareCount.textContent = state.compare.length;
            elements.compareBar.classList.toggle('active', state.compare.length > 0);

            elements.compareItems.innerHTML = state.compare.map(item => `
                <div class="compare-pill">
                    ${item.name}
                    <button type="button" data-id="${item.id}"><i class="fas fa-times"></i></button>
                </div>
            `).join('');

            elements.compareItems.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', () => {
                    const productId = parseInt(button.getAttribute('data-id'), 10);
                    const product = state.compare.find(item => item.id === productId);
                    if (product) {
                        toggleCompare(product, null);
                    }
                });
            });

            if (elements.compareOpen) {
                elements.compareOpen.disabled = state.compare.length < 2;
                elements.compareOpen.style.opacity = state.compare.length < 2 ? '0.6' : '1';
            }

            if (elements.compareModal && elements.compareModal.classList.contains('active')) {
                renderCompareModal();
            }
        }

        function renderCompareModal() {
            if (!elements.compareTable) return;

            if (state.compare.length < 2) {
                elements.compareTable.innerHTML = '<p class="filter-note">Select at least two products to compare.</p>';
                return;
            }

            const headers = state.compare.map(product => `
                <th>
                    <div class="compare-product-head">
                        <img src="${product.image}" alt="${product.name}">
                        <strong>${product.name}</strong>
                    </div>
                </th>
            `).join('');

            const rows = [
                { label: 'Price', value: product => `$${product.price.toFixed(2)}` },
                { label: 'Rating', value: product => `${product.rating.toFixed(1)} (${product.reviewCount})` },
                { label: 'Stock', value: product => product.stock > 0 ? `${product.stock} available` : 'Out of stock' },
                { label: 'Sizes', value: product => product.sizes.join(', ') },
                { label: 'Color', value: product => product.colorName },
                { label: 'Brand', value: product => product.brand || 'Unknown' },
                { label: 'Category', value: product => product.category }
            ];

            elements.compareTable.innerHTML = `
                <table class="compare-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            ${headers}
                        </tr>
                    </thead>
                    <tbody>
                        ${rows.map(row => `
                            <tr>
                                <th>${row.label}</th>
                                ${state.compare.map(product => `<td>${row.value(product)}</td>`).join('')}
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        }

        function openCompareModal() {
            if (!elements.compareModal) return;
            if (state.compare.length < 2) {
                showToast('Select at least 2 products to compare', 'error');
                return;
            }
            elements.compareModal.classList.add('active');
            renderCompareModal();
            updateOverlayState();
        }

        function closeCompareModal() {
            if (!elements.compareModal) return;
            elements.compareModal.classList.remove('active');
            updateOverlayState();
        }

        function clearCompare() {
            state.compare = [];
            updateCompareUI();
            showToast('Compare list cleared', 'success');
        }

        function openSizeGuideModal() {
            if (!elements.sizeGuideModal) return;
            elements.sizeGuideModal.classList.add('active');
            updateOverlayState();
        }

        function closeSizeGuideModal() {
            if (!elements.sizeGuideModal) return;
            elements.sizeGuideModal.classList.remove('active');
            updateOverlayState();
        }

        function addEmailNotification(title, message) {
            state.notifications.unshift({
                id: Date.now() + Math.random(),
                title,
                message,
                date: new Date().toISOString()
            });
            renderNotifications();
        }

        function renderNotifications() {
            if (!elements.notificationList) return;

            if (state.notifications.length === 0) {
                elements.notificationList.classList.add('filter-note');
                elements.notificationList.innerHTML = 'No emails sent yet.';
                return;
            }

            elements.notificationList.classList.remove('filter-note');
            elements.notificationList.innerHTML = state.notifications.map(note => `
                <div class="notification-item">
                    <div class="notification-icon"><i class="fas fa-envelope"></i></div>
                    <div>
                        <strong>${note.title}</strong>
                        <div class="filter-note">${note.message}</div>
                        <div class="filter-note">${formatDateLabel(note.date)}</div>
                    </div>
                </div>
            `).join('');
        }

        // Filter products based on criteria
        function filterProducts() {
            const searchTerm = elements.searchInput.value.toLowerCase();
            
            // Get the correct filter elements based on current page
            let categoryFilter, minPrice, maxPrice, stockFilter, sizeFilter, colorFilter, sortFilter;
            let container;
            
            switch(state.currentPage) {
                case 'home':
                    categoryFilter = elements.categoryFilter;
                    minPrice = elements.minPrice;
                    maxPrice = elements.maxPrice;
                    stockFilter = elements.stockFilter;
                    sizeFilter = elements.sizeFilter;
                    colorFilter = elements.colorFilter;
                    sortFilter = elements.sortFilter;
                    container = elements.productsContainer;
                    break;
                case 'categories':
                    categoryFilter = document.getElementById('category-filter-categories');
                    minPrice = document.getElementById('min-price-categories');
                    maxPrice = document.getElementById('max-price-categories');
                    stockFilter = document.getElementById('stock-filter-categories');
                    sizeFilter = document.getElementById('size-filter-categories');
                    colorFilter = document.getElementById('color-filter-categories');
                    sortFilter = document.getElementById('sort-filter-categories');
                    container = elements.categoriesProductsContainer;
                    break;
                case 'deals':
                    categoryFilter = document.getElementById('category-filter-deals');
                    minPrice = document.getElementById('min-price-deals');
                    maxPrice = document.getElementById('max-price-deals');
                    stockFilter = document.getElementById('stock-filter-deals');
                    sizeFilter = document.getElementById('size-filter-deals');
                    colorFilter = document.getElementById('color-filter-deals');
                    sortFilter = document.getElementById('sort-filter-deals');
                    container = elements.dealsProductsContainer;
                    break;
                default:
                    return;
            }
            
            // If we're not on a product listing page, don't filter
            if (!container) return;
            
            const category = categoryFilter ? categoryFilter.value : 'all';
            const minPriceVal = minPrice ? parseFloat(minPrice.value) || 0 : 0;
            const maxPriceVal = maxPrice ? parseFloat(maxPrice.value) || 2000 : 2000;
            const stockFilterVal = stockFilter ? stockFilter.value : 'all';
            const sizeFilterVal = sizeFilter ? sizeFilter.value : 'all';
            const colorFilterVal = colorFilter ? colorFilter.value : 'all';
            const sortFilterVal = sortFilter ? sortFilter.value : 'featured';
            
            let productsToFilter = state.products;
            
            // For deals page, only show discounted products
            if (state.currentPage === 'deals') {
                productsToFilter = state.products.filter(product => product.discountPercentage > 0);
            }
            
            const filteredProducts = productsToFilter.filter(product => {
                // Search filter
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) || 
                                    product.description.toLowerCase().includes(searchTerm);
                
                // Category filter
                const matchesCategory = category === 'all' || product.category === category;
                
                // Price filter
                const matchesPrice = product.price >= minPriceVal && product.price <= maxPriceVal;
                
                // Stock filter
                const matchesStock = stockFilterVal === 'all' || 
                                (stockFilterVal === 'in-stock' && product.stock > 0);

                // Size filter
                const matchesSize = sizeFilterVal === 'all' || product.sizes.includes(sizeFilterVal);

                // Color filter
                const matchesColor = colorFilterVal === 'all' || product.color === colorFilterVal;
                
                return matchesSearch && matchesCategory && matchesPrice && matchesStock && matchesSize && matchesColor;
            });

            const sortedProducts = sortProducts(filteredProducts, sortFilterVal);
            
            // Display the filtered products
            displayProducts(sortedProducts, container);
            
            // Scroll to top after filtering (only if we're already on the page)
            if (state.currentPage === 'home') {
                const featuredProducts = document.getElementById('featured-products');
                if (featuredProducts) {
                    featuredProducts.scrollIntoView({ behavior: 'smooth' });
                }
            } else {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Cart functionality
        function loadCart() {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                state.cart = JSON.parse(savedCart);
            }
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(state.cart));
        }

        function addToCart(product) {
            const existingItem = state.cart.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                state.cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: 1
                });
            }
            
            saveCart();
            updateCartUI();
            showToast(`${product.name} added to cart`, 'success');
        }

        function removeFromCart(productId) {
            state.cart = state.cart.filter(item => item.id !== productId);
            saveCart();
            updateCartUI();
            showToast('Product removed from cart', 'error');
        }

        function updateCartQuantity(productId, change) {
            const item = state.cart.find(item => item.id === productId);
            
            if (item) {
                item.quantity += change;
                
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    saveCart();
                    updateCartUI();
                }
            }
        }

        function updateCartUI() {
            // Update cart count badge
            const totalItems = state.cart.reduce((sum, item) => sum + item.quantity, 0);
            elements.cartCount.textContent = totalItems;
            
            // Update cart drawer
            updateCartDrawer();
            
            // Update checkout if on checkout page
            if (state.currentPage === 'checkout') {
                displayCheckout();
            }
        }

        function updateCartDrawer() {
            if (!elements.cartItems) return;
            
            if (state.cart.length === 0) {
                elements.cartItems.innerHTML = `
                    <div class="empty-cart">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Your cart is empty</h3>
                        <p>Add some products to your cart</p>
                    </div>
                `;
                elements.cartItemsCount.textContent = '0';
                elements.cartSubtotal.textContent = '$0.00';
                elements.cartTotal.textContent = '$0.00';
                return;
            }
            
            let cartHTML = '';
            let subtotal = 0;
            let totalItems = 0;
            
            state.cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                totalItems += item.quantity;
                
                cartHTML += `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-details">
                            <h4 class="cart-item-name">${item.name}</h4>
                            <div class="cart-item-price">$${item.price.toFixed(2)}</div>
                            <div class="cart-item-quantity">
                                <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                                <span class="quantity">${item.quantity}</span>
                                <button class="quantity-btn increase" data-id="${item.id}">+</button>
                                <button class="remove-item" data-id="${item.id}">Remove</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            elements.cartItems.innerHTML = cartHTML;
            elements.cartItemsCount.textContent = totalItems;
            elements.cartSubtotal.textContent = `$${subtotal.toFixed(2)}`;
            elements.cartTotal.textContent = `$${subtotal.toFixed(2)}`;
            
            // Add event listeners to cart item buttons
            elements.cartItems.querySelectorAll('.decrease').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.getAttribute('data-id'));
                    updateCartQuantity(productId, -1);
                });
            });
            
            elements.cartItems.querySelectorAll('.increase').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.getAttribute('data-id'));
                    updateCartQuantity(productId, 1);
                });
            });
            
            elements.cartItems.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.getAttribute('data-id'));
                    removeFromCart(productId);
                });
            });
        }

        function openCart() {
            elements.cartDrawer.classList.add('open');
            updateOverlayState();
        }

        function closeCart() {
            elements.cartDrawer.classList.remove('open');
            updateOverlayState();
        }

        function closeOverlays() {
            closeCart();
            closeCompareModal();
            closeSizeGuideModal();
        }

        function updateOverlayState() {
            const hasCart = elements.cartDrawer.classList.contains('open');
            const hasCompare = elements.compareModal && elements.compareModal.classList.contains('active');
            const hasSizeGuide = elements.sizeGuideModal && elements.sizeGuideModal.classList.contains('active');
            const shouldShow = hasCart || hasCompare || hasSizeGuide;

            if (elements.overlay) {
                elements.overlay.classList.toggle('active', shouldShow);
            }

            document.body.style.overflow = shouldShow ? 'hidden' : '';
        }

        // Checkout functionality
        function displayCheckout() {
            if (!elements.checkoutItems) return;
            
            if (state.cart.length === 0) {
                elements.checkoutItems.innerHTML = '<p style="text-align: center; padding: 2rem; color: hsl(var(--muted-foreground));">Your cart is empty</p>';
                elements.checkoutSubtotal.textContent = '$0.00';
                elements.checkoutTax.textContent = '$0.00';
                elements.checkoutTotal.textContent = '$0.00';
                return;
            }
            
            let checkoutHTML = '';
            let subtotal = 0;
            
            state.cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                checkoutHTML += `
                    <div class="order-item">
                        <div class="order-item-details">
                            <img src="${item.image}" alt="${item.name}" class="order-item-image">
                            <div>
                                <div class="order-item-name">${item.name}</div>
                                <div>Qty: ${item.quantity}</div>
                            </div>
                        </div>
                        <div class="order-item-price">$${itemTotal.toFixed(2)}</div>
                    </div>
                `;
            });
            
            const tax = subtotal * 0.1; // 10% tax
            const shipping = 9.99;
            const total = subtotal + tax + shipping;
            
            elements.checkoutItems.innerHTML = checkoutHTML;
            elements.checkoutSubtotal.textContent = `$${subtotal.toFixed(2)}`;
            elements.checkoutTax.textContent = `$${tax.toFixed(2)}`;
            elements.checkoutTotal.textContent = `$${total.toFixed(2)}`;
        }

        function processOrder() {
            if (state.cart.length === 0) {
                showToast('Your cart is empty', 'error');
                return;
            }

            const emailInput = document.getElementById('email');
            const customerEmail = emailInput ? emailInput.value.trim() : '';
            const orderId = Math.floor(Math.random() * 900000) + 100000;
            
            // In a real application, you would process the payment here
            showToast('Order placed successfully!', 'success');

            if (elements.notifyConfirmation && elements.notifyConfirmation.checked) {
                const recipient = customerEmail || 'your inbox';
                addEmailNotification(
                    'Order Confirmation',
                    `Order #${orderId} confirmed. Confirmation sent to ${recipient}.`
                );
            }

            if (elements.notifyShipping && elements.notifyShipping.checked) {
                setTimeout(() => {
                    addEmailNotification(
                        'Shipping Update',
                        `Order #${orderId} is on the way. Tracking details will follow shortly.`
                    );
                    showToast('Shipping update sent', 'success');
                }, 3000);
            }
            
            // Clear cart
            state.cart = [];
            saveCart();
            updateCartUI();
            
            // Redirect to home after a delay
            setTimeout(() => {
                navigateToPage('home');
            }, 2000);
        }

        // Wishlist functionality
        function loadWishlist() {
            const savedWishlist = localStorage.getItem('wishlist');
            if (savedWishlist) {
                state.wishlist = JSON.parse(savedWishlist);
            }
        }

        function saveWishlist() {
            localStorage.setItem('wishlist', JSON.stringify(state.wishlist));
        }

        function toggleWishlist(product, button) {
            const isInWishlist = state.wishlist.some(item => item.id === product.id);
            
            if (isInWishlist) {
                state.wishlist = state.wishlist.filter(item => item.id !== product.id);
                if (button) {
                    button.classList.remove('active');
                    button.innerHTML = '<i class="far fa-heart"></i>';
                }
                showToast(`${product.name} removed from wishlist`, 'error');
            } else {
                state.wishlist.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image
                });
                if (button) {
                    button.classList.add('active');
                    button.innerHTML = '<i class="fas fa-heart"></i>';
                }
                showToast(`${product.name} added to wishlist`, 'success');
            }
            
            saveWishlist();
            updateWishlistUI();
        }

        function updateWishlistUI() {
            elements.wishlistCount.textContent = state.wishlist.length;
            
            // Update wishlist page if active
            if (state.currentPage === 'wishlist') {
                displayWishlist();
            }
        }

        function displayWishlist() {
            if (!elements.wishlistContainer) return;
            
            if (state.wishlist.length === 0) {
                elements.wishlistContainer.innerHTML = `
                    <div class="empty-wishlist">
                        <i class="far fa-heart"></i>
                        <h2>Your wishlist is empty</h2>
                        <p>Add products you love to your wishlist for easy access later.</p>
                        <a href="#" class="btn btn-primary" data-page="categories" style="margin-top: 1.5rem;">
                            <i class="fas fa-shopping-bag"></i>
                            Start Shopping
                        </a>
                    </div>
                `;
                
                // Add event listener to the button
                const shopBtn = elements.wishlistContainer.querySelector('a');
                if (shopBtn) {
                    shopBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        navigateToPage('categories');
                    });
                }
                
                return;
            }
            
            let wishlistHTML = '<div class="products-grid">';
            
            state.wishlist.forEach((product, index) => {
                wishlistHTML += `
                    <div class="product-card fade-in stagger-${(index % 3) + 1}">
                        <div class="product-image-container">
                            <img src="${product.image}" alt="${product.name}" class="product-image">
                            <div class="product-badges">
                                <span class="badge-category">Wishlist</span>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-name">${product.name}</h3>
                            <div class="product-price">
                                <span class="current-price">$${product.price.toFixed(2)}</span>
                            </div>
                            <div class="product-actions">
                                <button class="btn-add-to-cart" data-id="${product.id}">
                                    <i class="fas fa-shopping-cart"></i>
                                    Add to Cart
                                </button>
                                <button class="btn-wishlist active" data-id="${product.id}">
                                    <i class="fas fa-heart"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            wishlistHTML += '</div>';
            elements.wishlistContainer.innerHTML = wishlistHTML;
            
            // Add event listeners to wishlist items
            elements.wishlistContainer.querySelectorAll('.btn-add-to-cart').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.getAttribute('data-id'));
                    const product = state.wishlist.find(item => item.id === productId);
                    if (product) {
                        addToCartWithAnimation(product, btn);
                    }
                });
            });
            
            elements.wishlistContainer.querySelectorAll('.btn-wishlist').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.getAttribute('data-id'));
                    const product = state.wishlist.find(item => item.id === productId);
                    if (product) {
                        toggleWishlist(product, btn);
                    }
                });
            });
            
            // Add click event to product cards to view details
            elements.wishlistContainer.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (!e.target.closest('button')) {
                        const productId = parseInt(card.querySelector('.btn-add-to-cart').getAttribute('data-id'));
                        const product = state.products.find(p => p.id === productId);
                        if (product) {
                            viewProductDetails(product);
                        }
                    }
                });
            });
        }

        // Login functionality
        function handleLogin() {
            // In a real application, you would authenticate with a server here
            showToast('Login successful!', 'success');
            
            // Redirect to home after a delay
            setTimeout(() => {
                navigateToPage('home');
            }, 1500);
        }

        // Theme functionality
        function setTheme(theme) {
            state.theme = theme;
            document.body.className = theme;
            localStorage.setItem('theme', theme);
            
            // Update theme icon
            if (theme === 'dark') {
                elements.themeIcon.className = 'fas fa-sun';
                document.body.classList.add('dark');
            } else {
                elements.themeIcon.className = 'fas fa-moon';
                document.body.classList.remove('dark');
            }
        }

        function toggleTheme() {
            const newTheme = state.theme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        // Toast notifications
        function showToast(message, type = 'success') {
            if (!elements.toast || !elements.toastMessage) return;
            
            elements.toastMessage.textContent = message;
            elements.toast.className = `toast ${type}`;
            elements.toast.classList.add('show');
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, 3000);
        }

        // Scroll to top functionality
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function toggleScrollToTop() {
            if (!elements.scrollToTop) return;
            
            if (window.scrollY > 300) {
                elements.scrollToTop.classList.add('visible');
            } else {
                elements.scrollToTop.classList.remove('visible');
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
